!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@actualwave/type-checkers")):"function"==typeof define&&define.amd?define(["exports","@actualwave/type-checkers"],t):t(e.ExtendedTypeChecker={},e.TypeCheckers)}(this,function(e,t){"use strict";function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t){return e(t={exports:{}},t.exports),t.exports}var o=s(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=(e,t,r,s)=>`${e}Error on "${t}" instead of "${r}" received "${s}"`;t.ConsoleErrorReporter=((e,t,s,o)=>console.error(r(e,t,s,o))),t.ConsoleWarnReporter=((e,t,s,o)=>console.warn(r(e,t,s,o))),t.ThrowErrorReporter=((e,t,s,o)=>{throw new Error(r(e,t,s,o))})});r(o);o.ConsoleErrorReporter,o.ConsoleWarnReporter,o.ThrowErrorReporter;var n=s(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=(e=>(t,r)=>Boolean(t&&e.call(t,r)))(Object.prototype.hasOwnProperty);t.hasOwn=r,t.default=r});r(n);n.hasOwn;var a=s(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.storage=new Map}has(e){const t=this.storage.get(e);return t&&t.size}hasValue(e,t){const r=this.storage.get(e);return r&&r.has(t)}get(e){return this.storage.get(e)}list(e){const t=this.storage.get(e);return t?Array.from(t):[]}forEach(e){this.storage.forEach((t,r)=>t.forEach(t=>e(t,r,this)))}eachValue(e,t){const r=this.storage.get(e);r&&r.forEach(r=>t(r,e,this))}add(e,t){if(!t)return;const r=this.storage.get(e);r?r.add(t):this.storage.set(e,new Set([t]))}set(e,t){t&&0!==t.size?this.storage.set(e,new Set(t)):this.remove(e)}remove(e){this.storage.delete(e)}removeValue(e,t){const r=this.storage.get(e);r&&(r.delete(t),r.size||this.remove(e))}clone(){const e=new r;return this.storage.forEach((t,r)=>e.set(r,new Set(t))),e}}t.MapOfSets=r,t.createMapOfSets=(()=>new r),t.default=r});r(a);a.MapOfSets,a.createMapOfSets;var l=s(function(e,t){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),o=r(a);const l="never",c="once",i="all",p=Symbol("type-checkers:report-level"),u=Symbol("type-checkers:property-report-level");let h=i;const y=e=>{switch(e){case l:case c:return e;default:return i}},g=()=>h,R=(e,t)=>s(e[u],t)?e[u][t]:e[p],d=(e,t)=>{let r=R(e,t);return r||(r=R(e.constructor,t)),r||g()},E=(e,t,r)=>(r.forEach(e=>{t.has(e)||t.add(e)}),t);class T extends o{add(e,t,r){if(t)switch(r){case l:this.remove(e);break;case c:super.add(e,t);break;case i:default:{const r=this.storage.get(e);r&&r.size||this.storage.set(e,new Set([t]))}}}addFor(e,t,r){this.add(e,t,d(r,e))}set(e,t,r){t&&0!==t.size&&r!==l?super.set(e,t):this.remove(e)}setFor(e,t,r){return this.set(e,t,d(r,e))}clone(){const e=new T;return this.storage.forEach((t,r)=>e.set(r,new Set(t))),e}copyTo(e,t,r=E){return this.storage.forEach((s,o)=>{const n=y(t&&d(t,o));switch(n){case i:case c:e.has(o)?e.set(o,r(o,e.get(o),s,n),n):e.set(o,new Set(s))}}),e}}t.REPORT_ALL=i,t.REPORT_NEVER=l,t.REPORT_ONCE=c,t.createTypesStorage=(()=>new T),t.defaultMergeStrategy=E,t.getGlobalReportingLevel=g,t.setGlobalReportingLevel=(e=>{h=y(e)}),t.getReportingLevel=d,t.setReportingLevel=((e,t,r)=>{((e,t)=>{t?e[p]=y(t):delete e[p]})(e,t),((e,t)=>{t?e[u]=Object.keys(t).reduce((e,r)=>(e[r]=y(t[r]),e),{}):delete e[u]})(e,r)})});r(l);l.REPORT_ALL,l.REPORT_NEVER,l.REPORT_ONCE;var c=l.createTypesStorage,i=(l.defaultMergeStrategy,l.getGlobalReportingLevel,l.setGlobalReportingLevel,l.getReportingLevel,l.setReportingLevel,s(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});let r=o.ConsoleErrorReporter;const s=()=>r,n="(Merge)",a="(GetProperty)",c="(SetProperty)",i="(Arguments)",p="(ReturnValue)",u=(e,t,r,o,n)=>{if(!n)return!0;const{lastName:a}=o,l=t.has(a)&&!t.hasValue(a,n);if(l){s()(e,o.toString(),t.list(a).join(", "),n)}return t.addFor(a,n,r),!l},h=e=>{if(void 0===e)return"";const t=typeof e;return"object"===t&&e instanceof Array?"array":t};class y{constructor(e=!0,t=!0){this.collectTypesOnInit=e,this.enableGetChecker=t}init(e,t=null){let r;return t?r=t:this.collectTypesOnInit&&(r=l.createTypesStorage(),Object.keys(e).forEach(t=>r.addFor(t,this.getTypeValue(e[t]),e))),r}getTypeValue(e){return h(e)}checkType(e,t,r,s,o){return u(e,t,r,s,o)}mergeConfigs(e,t,r){const o=s();t.copyTo(e,null,(e,t,s)=>{const a=t.values().next().value;return s.forEach(e=>{t.has(e)||(t.add(e),a&&o(n,r,a,e))}),t})}getProperty(e,t,r,s){if(!this.enableGetChecker)return!0;const o=this.getTypeValue(r);return this.checkType(a,s,e,t,o)}setProperty(e,t,r,s){const o=this.getTypeValue(r);return this.checkType(c,s,e,t,o)}arguments(e,t,r,s){const{length:o}=r;let n=!0;for(let a=0;a<o;a++){const o=this.getTypeValue(r[a]);n=this.checkType(i,s,e,t.clone(a),o)&&n}return n}returnValue(e,t,r,s){const o=this.getTypeValue(r),n=t.clone();return n.appendCustomValue(p),this.checkType(p,s,e,n,o)}}t.REPORT_ALL=l.REPORT_ALL,t.REPORT_NEVER=l.REPORT_NEVER,t.REPORT_ONCE=l.REPORT_ONCE,t.getGlobalReportingLevel=l.getGlobalReportingLevel,t.setGlobalReportingLevel=l.setGlobalReportingLevel,t.getReportingLevel=l.getReportingLevel,t.setReportingLevel=l.setReportingLevel,t.MERGE=n,t.ARGUMENTS=i,t.GET_PROPERTY=a,t.RETURN_VALUE=p,t.SET_PROPERTY=c,t.checkPrimitiveType=u,t.getTypeValue=h,t.PrimitiveTypeChecker=y,t.createPrimitiveTypeChecker=((e=!0,t=!0)=>new y(e,t)),t.getErrorReporter=s,t.setErrorReporter=(e=>{r=e}),t.default=y})),p=r(i),u=i.REPORT_ALL,h=i.REPORT_NEVER,y=i.REPORT_ONCE,g=i.getGlobalReportingLevel,R=i.setGlobalReportingLevel,d=i.getReportingLevel,E=i.setReportingLevel,T=i.MERGE,f=i.ARGUMENTS,P=i.GET_PROPERTY,O=i.RETURN_VALUE,v=i.SET_PROPERTY,m=(i.checkPrimitiveType,i.getTypeValue),_=(i.PrimitiveTypeChecker,i.createPrimitiveTypeChecker,i.getErrorReporter),b=i.setErrorReporter,L=s(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>{if(null==e)return;const t=Object.getPrototypeOf(e);return"object"==typeof t?t.constructor:t};t.getClassName=(e=>{if(!e)return"";const t=String(r(e)).match(/^(?:[^\(\{\s]*)(?:class|function)\s+([\w\d_$]+)(?:\s*\(|\s*\{|\s+extends)/);return t?t[1]:""}),t.getParentClass=(e=>{const t=r(e);return t&&Object.getPrototypeOf(t)}),t.getClass=r,t.default=r});r(L);L.getClassName,L.getParentClass;var V=L.getClass;const S=new Set([Array]),w="(Index)",C=e=>!!e&&S.has(V(e)),G=(e,r)=>{const s=t.getTypeCheckerData(e);s&&r&&s.set(w,new Set([r]))};var k=s(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>"function"==typeof e;t.isFunction=r,t.default=r}),N=r(k);k.isFunction;class x extends p{constructor({collectTypesOnInit:e=!0,enableGetChecker:t=!0,areArrayElementsOfSameType:r=!0,customGetTypeValue:s}={}){if(super(e,t),this.setNamedProperty=((e,t,r,s)=>super.setProperty(e,t,r,s)),this.areArrayElementsOfSameType=r,this.customGetTypeValue=s,void 0!==this.customGetTypeValue&&!N(this.customGetTypeValue))throw new Error('"customGetTypeValue" must be a callable object, i.e. function.')}getTypeValue(e){return this.customGetTypeValue?this.customGetTypeValue(e):super.getTypeValue(e)}findIndexedType(e){const{length:t}=e;for(let r=0;r<t;r+=1){const t=this.getTypeValue(e[r]);if(t)return t}return""}init(e,t=null){if(!t&&this.collectTypesOnInit&&this.areArrayElementsOfSameType&&C(e)){const t=c(),r=this.findIndexedType(e);if(r)return t.add(w,r),t}return super.init(e,t)}getProperty(e,t,r,s){return this.areArrayElementsOfSameType&&C(e)?this.getIndexProperty(e,t,r,s):this.getNamedProperty(e,t,r,s)}getIndexProperty(e,t,r,s){return this.checkType(P,e,t.clone(w),this.getTypeValue(r),s)}getNamedProperty(e,t,r,s){return super.getProperty(e,t,r,s)}setProperty(e,t,r,s){return this.areArrayElementsOfSameType&&C(e)?this.setIndexProperty(e,t,r,s):this.setNamedProperty(e,t,r,s)}setIndexProperty(e,t,r,s){const o=this.getTypeValue(r);return this.checkType(v,e,t,o,s)}}e.INDEX=w,e.isIndexAccessTarget=C,e.registerIndexBasedClass=(e=>{S.add(e)}),e.setIndexValueType=G,e.setIndexValueTypeBy=((e,t)=>{G(e,m(t))}),e.ExtendedTypeChecker=x,e.createExtendedTypeChecker=(e=>new x(e)),e.MERGE=T,e.ARGUMENTS=f,e.GET_PROPERTY=P,e.RETURN_VALUE=O,e.SET_PROPERTY=v,e.getErrorReporter=_,e.setErrorReporter=b,e.REPORT_ALL=u,e.REPORT_NEVER=h,e.REPORT_ONCE=y,e.getGlobalReportingLevel=g,e.setGlobalReportingLevel=R,e.getReportingLevel=d,e.setReportingLevel=E,e.default=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=extended-type-checker.min.js.map
